/* eslint-disable react-refresh/only-export-components */
import React, { createContext, useCallback, useContext, useMemo, useState } from "react";

const STORAGE_KEY = "renfe-ds-lang";

const STRINGS = {
  es: {
    appName: "Renfe",
    nav: {
      home: "Inicio",
      search: "Buscar",
      help: "Ayuda",
      access: "Accede",
      menu: "Menú",
      mainLabel: "Navegación principal",
      menuOpen: "Abrir menú",
      menuClose: "Cerrar menú",
      login: "Entrar",
      results: "Resultados",
      fares: "Tarifas",
      extras: "Extras",
      payment: "Pago",
    },
    common: {
      continue: "Continuar",
      back: "Volver",
      retry: "Reintentar",
      change: "Cambiar",
      accept: "Aceptar",
      close: "Cerrar",
      loading: "Cargando",
      optional: "(opcional)",
      skipToContent: "Saltar al contenido",
      language: "Idioma",
    },
    home: {
      title: "Buscar viaje",
      origin: "Origen",
      destination: "Destino",
      dates: "Fechas",
      departDate: "Ida",
      returnDate: "Vuelta",
      tripType: "Tipo de viaje",
      oneWay: "Viaje solo ida",
      roundTrip: "Viaje de ida y vuelta",
      passengers: "Pasajeros",
      adults: "adulto",
      passengersAdults: "Adultos",
      passengersAdultsHelp: "Más de 13 años",
      passengersChildren: "Niños",
      passengersChildrenHelp: "De 0 a 13 años",
      passengersInfants: "Bebés / Niños",
      passengersInfantsHelp: "De 0 a 3 años gratis\nSin ocupar plaza",
      passengersCancel: "Cancelar",
      passengersApply: "Listo",
      weekDays: ["Lun", "Mar", "Mié", "Jue", "Vie", "Sáb", "Dom"],
      resetDates: "Restablecer",
      search: "Buscar",
      swap: "Intercambiar",
      stationValid: "Estación válida",
      dateAriaLabel: "Selecciona una fecha",
      openCalendar: "Abrir calendario",
      prevMonth: "Mes anterior",
      nextMonth: "Mes siguiente",
      dateInvalid: "Fecha no válida",
      dateIncomplete: "Fecha incompleta",
      dateRequired: "Indica una fecha",
      errors: {
        originRequired: "Indica un origen",
        destinationRequired: "Indica un destino",
        stationInvalid: "Selecciona una estación válida de la lista.",
      },
    },
    login: {
      title: "Entrar o crear cuenta",
      welcomeTitle: "Bienvenido de nuevo",
      welcomeSubtitle: "Introduce tus datos",
      email: "Correo electrónico",
      emailPlaceholder: "Correo electrónico",
      password: "Contraseña",
      passwordPlaceholder: "Contraseña",
      google: "Entrar con Google",
      divider: "o",
      remember: "Recordarme durante 30 días",
      forgotPassword: "¿Has olvidado la contraseña?",
      submit: "Acceder",
      noAccount: "¿No tienes cuenta?",
      signUp: "Regístrate",
    },
    results: {
      title: "Resultados",
      filters: "Filtros",
      journeys: "Trenes disponibles",
      select: "Elegir",
      selected: "Seleccionado",
      filterTime: "Horarios",
      filterPrice: "Precio",
      filterServices: "Servicios",
      priceFrom: "Desde",
      sortBy: "Ordenar por",
      sortPrice: "Precio más bajo",
      sortDeparture: "Salida más temprana",
      sortDuration: "Menor duración",
      modifySearch: "Modificar búsqueda",
      emptyTitle: "No hay trenes disponibles",
      emptyBody: "Prueba ajustando la búsqueda o relajando los filtros aplicados.",
      emptyAction1: "Relaja filtros o amplía la franja horaria.",
      emptyAction2: "Aumenta el precio máximo.",
      emptyAction3: "Cambia la fecha seleccionada.",
      direct: "Directo",
      transfers: "transbordos",
      connection: "Conexión",
      serviceWifi: "Wifi",
      servicePower: "Enchufe",
      serviceQuiet: "Silencio",
      serviceCafe: "Cafetería",
      accessSeat: "Plaza H",
      accessAssistance: "Asistencia",
      accessCompanion: "Acompañante",
      accessAdjacent: "Asiento contiguo",
      pet: "Mascota",
      moreFeatures: "Mostrar más características",
      updatedFor: "Resultados actualizados para",
      dayPickerLabel: "Seleccionar día",
      prevDays: "Días anteriores",
      nextDays: "Días siguientes",
      noAvailability: "Sin plazas",
      today: "Hoy",
      loadingDay: "Actualizando resultados",
      onlyShowAvailable: "Solo mostrar días con trenes disponibles",
    },
    filtersPanel: {
      title: "Filtros",
      clearAll: "Limpiar todo",
      applied: "Aplicados",
      updating: "Actualizando resultados…",
      sections: {
        flexibleDates: {
          title: "Fechas flexibles",
          toggle: "Ver precios y disponibilidad ±3 días",
          note: "Mantén filtros al cambiar de día.",
        },
        pets: {
          title: "Mascotas",
          toggle: "Viajar con mascota",
          note: "Filtra trenes realmente pet-friendly.",
          typesLabel: "Tipo",
          typeDog: "Perro",
          typeCat: "Gato",
          typeOther: "Otros",
          sizesLabel: "Tamaño / peso",
          sizeSmall: "<10 kg (transportín)",
          sizeMedium: "10–40 kg (plaza)",
          sizeLarge: ">40 kg",
          onlyAllowed: "Solo mostrar trenes donde se permita",
          rulesLink: "Ver reglas por tren/tarifa",
        },
        connections: {
          title: "Enlaces y trasbordos",
          note: "Controla conexiones y tiempos mínimos.",
          directOnly: "Solo directos",
          maxTransfers: "Máx. trasbordos",
          transfer0: "0",
          transfer1: "1",
          transfer2: "2",
          minConnection: "Tiempo mínimo de conexión",
          conn10: "10 min",
          conn20: "20 min",
          conn30: "30 min",
        },
        price: {
          title: "Precio",
          note: "Define un tope para el precio base.",
          maxPrice: "Precio máximo",
          showFinal: "Mostrar precio final estimado (incl. extras)",
        },
        fare: {
          title: "Condiciones de tarifa",
          note: "Evita ambigüedad en cambios y reembolsos.",
          refundable: "Reembolsable",
          changes: "Permite cambios",
          seat: "Incluye selección de asiento",
          baggage: "Equipaje incluido",
        },
        time: {
          title: "Franja horaria",
          note: "Usa presets o define rangos.",
          morning: "Mañana",
          afternoon: "Tarde",
          night: "Noche",
          departRange: "Salida entre",
          arriveRange: "Llegada entre",
          from: "Desde",
          to: "Hasta",
        },
        duration: {
          title: "Duración",
          note: "Limita la duración total del viaje.",
          maxDuration: "Duración máxima",
          d2: "< 2h",
          d3: "< 3h",
          d4: "< 4h",
        },
        accessibility: {
          title: "Accesibilidad",
          note: "Opciones de viaje accesible.",
          seat: "Plaza H disponible",
          assistance: "Necesito asistencia",
          companion: "Viajo con acompañante",
          adjacent: "Asiento contiguo",
          prioritizeTransfers: "Priorizar rutas con menos trasbordos",
        },
        onboard: {
          title: "Servicios a bordo",
          note: "Servicios disponibles en el tren.",
          wifi: "Wifi",
          power: "Enchufe",
          quiet: "Silencio",
          cafe: "Cafetería",
        },
        train: {
          title: "Tipo de tren y estación",
          note: "Filtra por tipo u opciones alternativas.",
          ave: "AVE",
          avlo: "AVLO",
          alvia: "Alvia",
          md: "Media Distancia",
          altStations: "Estaciones alternativas cercanas",
        },
      },
    },
    fares: {
      title: "Tarifas",
      compare: "Comparar tarifas",
      select: "Elegir tarifa",
      tableFare: "Tarifa",
      tableConditions: "Condiciones",
      tablePrice: "Precio",
      tableAction: "Acción",
      selectedFareAnnounce: "Tarifa seleccionada",
      comparison: {
        tableLabel: "Comparativa de tarifas",
        basePriceNote: "Sobre el precio base",
        selected: "Seleccionada",
        select: "Elegir tarifa",
        viewConditions: "Ver condiciones",
        modalSubtitle: "Condiciones completas de la tarifa seleccionada.",
        close: "Cerrar",
        included: "Incluido",
        excluded: "No incluido",
        seatStandard: "Asiento estándar",
        seatComfort: "Asiento XL Confort",
        columns: {
          basic: "Básico",
          choose: "Elige",
          comfort: "Elige Confort",
          premium: "Premium",
        },
        rows: {
          seatType: { title: "Tipo de asiento", helper: "Comodidad" },
          changes: { title: "Cambios", helper: "Se abonará la diferencia de precio" },
          refund: { title: "Anulación", helper: "" },
          seatSelection: { title: "Selección de asiento", helper: "Escoge el asiento en el que quieras viajar" },
          lounge: { title: "Acceso a Salas Club", helper: "" },
        },
        values: {
          standard: "Estándar",
          xlComfort: "XL Confort",
          extra10: "Extra: 10 €",
          firstChangeFree: "1º cambio gratis",
          unlimitedChanges: "Cambios ilimitados",
          noIncluded: "No incluido",
          refund70: "Reembolso 70%",
          refund100: "Reembolso 100%",
          extra5: "Extra: 5 €",
          included: "Incluido",
        },
        groups: {
          changes: "Cambios y gestión",
          refunds: "Reembolsos y anulaciones",
          pets: "Mascotas",
          services: "Servicios",
        },
      },
    },
    faresCatalog: {
      basic: {
        name: "Básico",
        description: "Cambio con coste, sin reembolso.",
        features: [
          "Permite 1 cambio hasta 24 horas antes (10 € + diferencia de precio)",
          "Cambio de titular con coste",
          "No reembolsable",
          "Equipaje: hasta 3 bultos (máx. 25kg)",
        ],
      },
      choose: {
        name: "Elige",
        description: "Un cambio gratuito, reembolso parcial.",
        features: [
          "Un cambio gratuito, siguientes 10 €",
          "Cambio de titular con coste",
          "Cambio por pérdida de tren con coste",
          "Reembolsable 70%",
          "Equipaje: hasta 3 bultos (máx. 25kg)",
        ],
      },
      comfort: {
        name: "Elige Confort",
        description: "Asiento extragrande, reembolso parcial.",
        features: [
          "Asiento Extragrande",
          "Un cambio gratuito, siguientes 10 €",
          "Reembolsable 70%",
          "Cambio de titular con coste",
          "Cambio por pérdida de tren con coste",
          "Equipaje: hasta 3 bultos (máx. 25kg)",
        ],
      },
      premium: {
        name: "Prémium",
        description: "Cambios y reembolso total.",
        features: [
          "Asiento extragrande Confort",
          "Cambios gratuitos ilimitados, Puente AVE, Cambio por pérdida de tren, Cambio de titular gratuito",
          "100% reembolsable hasta 7 días, después 95%",
          "Selección de asiento, Acceso a salas club y restauración a la plaza",
          "Equipaje: hasta 3 bultos (máx. 25kg)",
        ],
      },
    },
    extras: {
      title: "Extras",
      select: "Añadir extras",
      added: "Añadido",
      perTraveler: "Por viajero",
      add: "Añadir",
      remove: "Eliminar",
      personalizeTitle: "Personaliza tu viaje",
      outbound: "Viaje de ida",
      return: "Viaje de vuelta",
      total: "Total",
      close: "Cerrar",
    },
    extrasDetails: {
      restauracion: "Selecciona el menú para tu viaje ahora o hasta 12 horas antes de la salida del tren. Podrás cancelar esta compra únicamente anulando tu billete y se te reembolsará el importe siempre que anules hasta 12 horas antes de la salida del tren. Servicio ofrecido por Serveo.",
      mascotas: "En trenes AVE, Avlo, Larga Distancia, Media Distancia y AVANT están admitidos los animales cuyo peso máximo no exceda de 10 Kg., siempre dentro de una jaula, transportín u otro tipo de contenedor cerrado cuyas medidas máximas sean 60x35x35 cm. con dispositivo para contener y retirar los residuos. Consulta resto de condiciones en https://www.renfe.com/es/es/viajar/informacion-util/mascotas.",
    },
    extrasCatalog: {
      restauracion: {
        name: "Restauración",
        description: "Selecciona tu menú ahora o hasta 12 horas antes de la salida",
        priceLabel: "Desde 7,50 €",
      },
      packSuperflex: {
        name: "Pack Superflex",
        description: "Cambios gratuitos ilimitados + Puente AVE + Reembolso total",
      },
      seat: {
        name: "Selección de asiento",
        description: "Selecciona la plaza que deseas",
      },
      puenteAve: {
        name: "Puente AVE",
        description: "Cambia tu salida el mismo día del viaje sin coste extra",
      },
      reembolsoTotal: {
        name: "Reembolso Total",
        description: "En caso de anulación, recupera el 100% del importe del billete",
      },
      mascotas: {
        name: "Mascotas",
        description: "Animales hasta 10kg en transportín (máx. 60x35x35 cm) permitidos",
      },
      bicicletas: {
        name: "Bicicletas",
        description: "Solo bicicletas plegadas/embaladas (máx. 140x90x40 cm) permitidas.",
        priceLabel: "GRATIS",
      },
      cambiosIlimitados: {
        name: "Cambios Gratuitos Ilimitados",
        description: "Cambia fecha y hora sin límite, pagando solo diferencia de precio",
      },
    },
    travelers: {
      title: "Introduce tus datos",
      passengerAdult: "Adulto",
      passengerChild: "Niño",
      passengerInfant: "Bebé",
      accordionTitle: "Viajero",
      form: {
        personalData: "Datos personales",
        firstName: "Nombre",
        lastName1: "Primer apellido",
        lastName2: "Segundo apellido",
        docType: "Tipo de documento",
        docNumber: "Número de documento",
        email: "Correo electrónico",
        phone: "Teléfono",
        phonePrefix: "Prefijo",
        largeFamily: "Familia numerosa",
        docOptions: {
          dni: "DNI",
          nie: "NIE",
          passport: "Pasaporte",
        },
        placeholders: {
          firstName: "Nombre",
          lastName1: "Primer apellido",
          lastName2: "Segundo apellido",
          docNumber: "Número de documento",
          email: "Correo electrónico",
          phone: "Teléfono",
        },
        errors: {
          firstNameRequired: "El nombre es obligatorio",
          lastName1Required: "El primer apellido es obligatorio",
          lettersOnly: "Solo letras",
          docRequired: "El número de documento es obligatorio",
          docFormat: "Ejemplo: 12345678Z",
          emailRequired: "El correo es obligatorio",
          emailInvalid: "Correo no válido",
          phoneRequired: "El teléfono es obligatorio",
          phoneFormat: "Formato: 000000000",
        },
        accordions: {
          renfeCard: "Tarjeta Más Renfe",
          discounts: "Descuentos, códigos promocionales / vales descuento",
          accessibility: "Accesibilidad",
        },
      },
    },
    payment: {
      title: "Pago",
      pay: "Confirmar pago",
      errorTitle: "No se pudo completar el pago",
      errorBody: "Ha ocurrido un error temporal. Puedes reintentar o volver atrás sin perder tu selección.",
      name: "Nombre",
      cardNumber: "Número de tarjeta",
      expiry: "Caducidad",
      cvv: "CVV",
      changeBody: "Cambia el método de pago sin perder tu selección.",
      accept: "Aceptar",
    },
    summary: {
      title: "Resumen",
      journey: "Trayecto",
      baseFare: "Base",
      fare: "Tarifa",
      extras: "Extras",
      passengers: "Pasajeros",
      total: "Total",
      viewDetails: "Ver detalles",
      breakdownTitle: "Desglose del precio",
      breakdownSubtitle: "Detalle del total según tu selección",
      priceUpdated: "Precio actualizado",
      pending: "Pendiente",
      selectJourneyHelper: "Selecciona un tren para continuar",
      selectFareHelper: "Selecciona una tarifa para continuar",
      noFare: "Sin tarifa",
      noExtras: "Sin extras",
    },
    stepper: {
      results: "Resultados",
      fares: "Tarifas",
      travelers: "Viajeros",
      extras: "Extras",
      payment: "Pago",
      step: "Paso",
      of: "de",
      progress: "Progreso",
    },
    tabs: {
      sevenDays: "7 días",
    },
    drawer: {
      menuTitle: "Menú",
      navigation: "Navegación",
      searchLabel: "Buscar",
      searchPlaceholder: "Buscar",
      cercanias: "Cercanías",
      viaja: "Viaja",
      sortBy: "Sort by",
      sortPrice: "Lowest price",
      sortDeparture: "Earliest departure",
      sortDuration: "Shortest duration",
      modifySearch: "Edit search",
      emptyTitle: "No trains available",
      emptyBody: "Try adjusting your search or relaxing the filters.",
      emptyAction1: "Relax filters or expand the time range.",
      emptyAction2: "Increase the max price.",
      emptyAction3: "Change the selected date.",
      direct: "Direct",
      transfers: "transfers",
      connection: "Connection",
      serviceWifi: "Wifi",
      servicePower: "Power",
      serviceQuiet: "Quiet",
      serviceCafe: "Cafe",
      accessSeat: "Accessible seat",
      accessAssistance: "Assistance",
      accessCompanion: "Companion",
      accessAdjacent: "Adjacent seat",
      inspira: "Inspírate",
      manageTicket: "Gestiona tu billete",
      moreRenfe: "Más Renfe",
      help: "Ayuda y contacto",
      access: "Acceso",
      settings: "Ajustes",
      language: "Idioma",
      cookies: "Galletas",
      cookiesMvp: "Gestión de cookies (MVP)",
      darkMode: "Modo oscuro",
      modeOn: "Modo oscuro activado",
      modeOff: "Modo oscuro desactivado",
    },
    navSearch: {
      title: "Buscar en la web",
      subtitle: "Encuentra páginas, ayuda o productos.",
      placeholder: "Escribe tu búsqueda",
      suggestionsLabel: "Busquedas frecuentes",
      close: "Cerrar",
      suggestions: [
        "Solicitud de reembolso",
        "Horarios online",
        "Billetes supersaver",
        "Swiss Travel Pass",
        "Saver Day Pass",
        "Half Fare Travelcard",
        "Half Fare Travelcard PLUS",
        "Interrail",
        "Bicicleta",
      ],
    },
  },
  en: {
    appName: "Renfe",
    nav: {
      home: "Home",
      search: "Search",
      help: "Help",
      access: "Sign in",
      menu: "Menu",
      mainLabel: "Main navigation",
      menuOpen: "Open menu",
      menuClose: "Close menu",
      login: "Sign in",
      results: "Results",
      fares: "Fares",
      extras: "Extras",
      payment: "Payment",
    },
    common: {
      continue: "Continue",
      back: "Back",
      retry: "Retry",
      change: "Change",
      accept: "Accept",
      close: "Close",
      loading: "Loading",
      optional: "(optional)",
      skipToContent: "Skip to content",
      language: "Language",
    },
    home: {
      title: "Search trip",
      origin: "Origin",
      destination: "Destination",
      dates: "Dates",
      departDate: "Departure",
      returnDate: "Return",
      tripType: "Trip type",
      oneWay: "One way",
      roundTrip: "Round trip",
      passengers: "Passengers",
      adults: "adult",
      passengersAdults: "Adults",
      passengersAdultsHelp: "Over 13 years",
      passengersChildren: "Children",
      passengersChildrenHelp: "Ages 0 to 13",
      passengersInfants: "Infants / Children",
      passengersInfantsHelp: "Ages 0 to 3 free\nNo seat",
      passengersCancel: "Cancel",
      passengersApply: "Done",
      weekDays: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
      resetDates: "Reset",
      search: "Search",
      swap: "Swap",
      stationValid: "Valid station",
      dateAriaLabel: "Select a date",
      openCalendar: "Open calendar",
      prevMonth: "Previous month",
      nextMonth: "Next month",
      dateInvalid: "Invalid date",
      dateIncomplete: "Incomplete date",
      dateRequired: "Select a date",
      errors: {
        originRequired: "Enter an origin",
        destinationRequired: "Enter a destination",
        stationInvalid: "Select a valid station from the list.",
      },
    },
    login: {
      title: "Sign in or create account",
      welcomeTitle: "Welcome back",
      welcomeSubtitle: "Please enter your details",
      email: "Email address",
      emailPlaceholder: "Email address",
      password: "Password",
      passwordPlaceholder: "Password",
      google: "Sign in with Google",
      divider: "or",
      remember: "Remember for 30 days",
      forgotPassword: "Forgot password",
      submit: "Sign in",
      noAccount: "Don’t have an account?",
      signUp: "Sign up",
    },
    results: {
      title: "Results",
      filters: "Filters",
      journeys: "Available trains",
      select: "Select",
      selected: "Selected",
      filterTime: "Times",
      filterPrice: "Price",
      filterServices: "Services",
      priceFrom: "From",
      sortBy: "Sort by",
      sortPrice: "Lowest price",
      sortDeparture: "Earliest departure",
      sortDuration: "Shortest duration",
      pet: "Pet",
      modifySearch: "Modify search",
      emptyTitle: "No trains available",
      emptyBody: "Try adjusting your search or relaxing the filters.",
      emptyAction1: "Relax filters or expand the time range.",
      emptyAction2: "Increase the max price.",
      emptyAction3: "Change the selected date.",
      direct: "Direct",
      transfers: "transfers",
      connection: "Connection",
      serviceWifi: "Wifi",
      servicePower: "Power",
      serviceQuiet: "Quiet",
      serviceCafe: "Cafe",
      accessSeat: "Accessible seat",
      accessAssistance: "Assistance",
      accessCompanion: "Companion",
      accessAdjacent: "Adjacent seat",
      moreFeatures: "Show more features",
      updatedFor: "Results updated for",
      dayPickerLabel: "Select day",
      prevDays: "Previous days",
      nextDays: "Next days",
      noAvailability: "No seats",
      today: "Today",
      loadingDay: "Updating results",
      onlyShowAvailable: "Show only days with available trains",
    },
    filtersPanel: {
      title: "Filters",
      clearAll: "Clear all",
      applied: "Applied",
      updating: "Updating results…",
      sections: {
        flexibleDates: {
          title: "Flexible dates",
          toggle: "See prices and availability ±3 days",
          note: "Keep filters when switching days.",
        },
        pets: {
          title: "Pets",
          toggle: "Travel with pet",
          note: "Filter truly pet-friendly trains.",
          typesLabel: "Type",
          typeDog: "Dog",
          typeCat: "Cat",
          typeOther: "Other",
          sizesLabel: "Size / weight",
          sizeSmall: "<10 kg (carrier)",
          sizeMedium: "10–40 kg (seat)",
          sizeLarge: ">40 kg",
          onlyAllowed: "Only show trains where it's allowed",
          rulesLink: "See rules by train/fare",
        },
        connections: {
          title: "Connections",
          note: "Control transfers and minimum times.",
          directOnly: "Direct only",
          maxTransfers: "Max transfers",
          transfer0: "0",
          transfer1: "1",
          transfer2: "2",
          minConnection: "Minimum connection time",
          conn10: "10 min",
          conn20: "20 min",
          conn30: "30 min",
        },
        price: {
          title: "Price",
          note: "Set a cap for the base price.",
          maxPrice: "Maximum price",
          showFinal: "Show estimated final price (incl. extras)",
        },
        fare: {
          title: "Fare conditions",
          note: "Decide with clear conditions.",
          refundable: "Refundable",
          changes: "Changes allowed",
          seat: "Seat selection included",
          baggage: "Baggage included",
        },
        time: {
          title: "Time window",
          note: "Use presets or set ranges.",
          morning: "Morning",
          afternoon: "Afternoon",
          night: "Night",
          departRange: "Departure between",
          arriveRange: "Arrival between",
          from: "From",
          to: "To",
        },
        duration: {
          title: "Duration",
          note: "Limit total trip duration.",
          maxDuration: "Max duration",
          d2: "< 2h",
          d3: "< 3h",
          d4: "< 4h",
        },
        accessibility: {
          title: "Accessibility",
          note: "Accessible travel options.",
          seat: "Accessible seat (H)",
          assistance: "I need assistance",
          companion: "Traveling with companion",
          adjacent: "Adjacent seat",
          prioritizeTransfers: "Prioritize fewer transfers",
        },
        onboard: {
          title: "Onboard services",
          note: "Services available on train.",
          wifi: "Wifi",
          power: "Power outlet",
          quiet: "Quiet car",
          cafe: "Cafeteria",
        },
        train: {
          title: "Train type & station",
          note: "Filter by type or alternatives.",
          ave: "AVE",
          avlo: "AVLO",
          alvia: "Alvia",
          md: "Regional",
          altStations: "Nearby alternative stations",
        },
      },
    },
    fares: {
      title: "Fares",
      compare: "Compare fares",
      select: "Select fare",
      tableFare: "Fare",
      tableConditions: "Conditions",
      tablePrice: "Price",
      tableAction: "Action",
      selectedFareAnnounce: "Selected fare",
      comparison: {
        tableLabel: "Fare comparison",
        basePriceNote: "On top of the base fare",
        selected: "Selected",
        select: "Select fare",
        viewConditions: "View conditions",
        modalSubtitle: "Full conditions for the selected fare.",
        close: "Close",
        included: "Included",
        excluded: "Not included",
        seatStandard: "Standard seat",
        seatComfort: "XL Comfort seat",
        columns: {
          basic: "Basic",
          choose: "Choose",
          comfort: "Choose Comfort",
          premium: "Premium",
        },
        rows: {
          seatType: { title: "Seat type", helper: "Comfort" },
          changes: { title: "Changes", helper: "Price difference will be charged" },
          refund: { title: "Refund", helper: "" },
          seatSelection: { title: "Seat selection", helper: "Pick the seat you want to travel in" },
          lounge: { title: "Club Lounge access", helper: "" },
        },
        values: {
          standard: "Standard",
          xlComfort: "XL Comfort",
          extra10: "Extra: €10",
          firstChangeFree: "1st change free",
          unlimitedChanges: "Unlimited changes",
          noIncluded: "Not included",
          refund70: "70% refund",
          refund100: "100% refund",
          extra5: "Extra: €5",
          included: "Included",
        },
        groups: {
          changes: "Changes & management",
          refunds: "Refunds & cancellations",
          pets: "Pets",
          services: "Services",
        },
      },
    },
    faresCatalog: {
      basic: {
        name: "Basic",
        description: "Change with fee, no refund.",
        features: [
          "1 change allowed up to 24 hours before (10 € + fare difference)",
          "Name change with fee",
          "Non-refundable",
          "Luggage: up to 3 bags (max. 25 kg)",
        ],
      },
      choose: {
        name: "Choose",
        description: "One free change, partial refund.",
        features: [
          "One free change, next changes 10 €",
          "Name change with fee",
          "Missed train change with fee",
          "70% refundable",
          "Luggage: up to 3 bags (max. 25 kg)",
        ],
      },
      comfort: {
        name: "Choose Comfort",
        description: "Extra-large seat, partial refund.",
        features: [
          "Extra-large seat",
          "One free change, next changes 10 €",
          "70% refundable",
          "Name change with fee",
          "Missed train change with fee",
          "Luggage: up to 3 bags (max. 25 kg)",
        ],
      },
      premium: {
        name: "Premium",
        description: "Unlimited changes and full refund.",
        features: [
          "Extra-large Comfort seat",
          "Unlimited free changes, Puente AVE, missed train change, free name change",
          "100% refundable up to 7 days, then 95%",
          "Seat selection, Club lounge access and seat service",
          "Luggage: up to 3 bags (max. 25 kg)",
        ],
      },
    },
    extras: {
      title: "Extras",
      select: "Add extras",
      added: "Added",
      perTraveler: "Per traveler",
      add: "Add",
      remove: "Remove",
      personalizeTitle: "Customize your trip",
      outbound: "Outbound trip",
      return: "Return trip",
      total: "Total",
      close: "Close",
    },
    extrasDetails: {
      restauracion: "Choose your menu for the trip now or up to 12 hours before departure. You can cancel this purchase only by cancelling your ticket, and you will be refunded if you cancel up to 12 hours before departure. Service provided by Serveo.",
      mascotas: "On AVE, Avlo, Long Distance, Medium Distance and AVANT trains, pets up to 10 kg are allowed in a closed carrier (max. 60x35x35 cm) with a device to contain and remove waste. See more conditions at https://www.renfe.com/es/es/viajar/informacion-util/mascotas.",
    },
    extrasCatalog: {
      restauracion: {
        name: "Catering",
        description: "Choose your menu now or up to 12 hours before departure",
        priceLabel: "From €7.50",
      },
      packSuperflex: {
        name: "Superflex Pack",
        description: "Unlimited free changes + Puente AVE + full refund",
      },
      seat: {
        name: "Seat selection",
        description: "Choose the seat you want",
      },
      puenteAve: {
        name: "Puente AVE",
        description: "Change your departure on the same day at no extra cost",
      },
      reembolsoTotal: {
        name: "Full refund",
        description: "If you cancel, get a 100% refund",
      },
      mascotas: {
        name: "Pets",
        description: "Pets up to 10 kg in a carrier (max. 60x35x35 cm) allowed",
      },
      bicicletas: {
        name: "Bicycles",
        description: "Only folded/packed bikes (max. 140x90x40 cm) allowed.",
        priceLabel: "FREE",
      },
      cambiosIlimitados: {
        name: "Unlimited free changes",
        description: "Change date and time without limit, paying only fare difference",
      },
    },
    travelers: {
      title: "Enter your details",
      passengerAdult: "Adult",
      passengerChild: "Child",
      passengerInfant: "Infant",
      accordionTitle: "Traveler",
      form: {
        personalData: "Personal details",
        firstName: "First name",
        lastName1: "First surname",
        lastName2: "Second surname",
        docType: "Document type",
        docNumber: "Document number",
        email: "Email",
        phone: "Phone",
        phonePrefix: "Prefix",
        largeFamily: "Large family",
        docOptions: {
          dni: "DNI",
          nie: "NIE",
          passport: "Passport",
        },
        placeholders: {
          firstName: "First name",
          lastName1: "First surname",
          lastName2: "Second surname",
          docNumber: "Document number",
          email: "Email",
          phone: "Phone",
        },
        errors: {
          firstNameRequired: "First name is required",
          lastName1Required: "First surname is required",
          lettersOnly: "Letters only",
          docRequired: "Document number is required",
          docFormat: "Example: 12345678Z",
          emailRequired: "Email is required",
          emailInvalid: "Invalid email",
          phoneRequired: "Phone is required",
          phoneFormat: "Format: 000000000",
        },
        accordions: {
          renfeCard: "Más Renfe card",
          discounts: "Discounts, promo codes / vouchers",
          accessibility: "Accessibility",
        },
      },
    },
    payment: {
      title: "Payment",
      pay: "Confirm payment",
      errorTitle: "Payment could not be completed",
      errorBody: "A temporary error occurred. You can retry or go back without losing your selection.",
      name: "Name",
      cardNumber: "Card number",
      expiry: "Expiry",
      cvv: "CVV",
      changeBody: "Change the payment method without losing your selection.",
      accept: "Accept",
    },
    summary: {
      title: "Summary",
      journey: "Journey",
      baseFare: "Base fare",
      fare: "Fare",
      extras: "Extras",
      passengers: "Passengers",
      total: "Total",
      viewDetails: "View details",
      breakdownTitle: "Price breakdown",
      breakdownSubtitle: "Breakdown of your total",
      priceUpdated: "Price updated",
      pending: "Pending",
      selectJourneyHelper: "Select a train to continue",
      selectFareHelper: "Select a fare to continue",
      noFare: "No fare",
      noExtras: "No extras",
    },
    stepper: {
      results: "Results",
      fares: "Fares",
      travelers: "Travelers",
      extras: "Extras",
      payment: "Payment",
      step: "Step",
      of: "of",
      progress: "Progress",
    },
    tabs: {
      sevenDays: "7 days",
    },
    drawer: {
      menuTitle: "Menu",
      navigation: "Navigation",
      searchLabel: "Search",
      searchPlaceholder: "Search",
      cercanias: "Cercanías",
      viaja: "Travel",
      inspira: "Get inspired",
      manageTicket: "Manage your ticket",
      moreRenfe: "More Renfe",
      help: "Help and contact",
      access: "Access",
      settings: "Settings",
      language: "Language",
      cookies: "Cookies",
      cookiesMvp: "Cookie management (MVP)",
      darkMode: "Dark mode",
      modeOn: "Dark mode enabled",
      modeOff: "Dark mode disabled",
    },
    navSearch: {
      title: "Search the site",
      subtitle: "Find pages, help, or products.",
      placeholder: "Enter search term",
      suggestionsLabel: "Often searched",
      close: "Close",
      suggestions: [
        "Refund request",
        "Online timetable",
        "Supersaver tickets",
        "Swiss Travel Pass",
        "Saver Day Pass",
        "Half Fare Travelcard",
        "Half Fare Travelcard PLUS",
        "Interrail",
        "Bike",
      ],
    },
  },
};

const I18nContext = createContext(null);

export function I18nProvider({ children }) {
  const [language, setLanguage] = useState(() => {
    const stored = localStorage.getItem(STORAGE_KEY);
    return stored && STRINGS[stored] ? stored : "es";
  });

  const setLang = useCallback((lang) => {
    if (!STRINGS[lang]) return;
    setLanguage(lang);
    localStorage.setItem(STORAGE_KEY, lang);
  }, []);

  const t = useCallback(
    (key) => {
      const parts = key.split(".");
      let current = STRINGS[language];
      for (const part of parts) {
        current = current?.[part];
      }
      return current ?? key;
    },
    [language]
  );

  const value = useMemo(
    () => ({ language, setLanguage: setLang, t }),
    [language, setLang, t]
  );

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) {
    throw new Error("useI18n must be used within I18nProvider");
  }
  return ctx;
}
